Описание методов фильтрации трасс ошибок
----------------------------------------

Общие определения

Трасса ошибки - последовательность операций, соответствующая пути выполнения программы от точки входа к метке ошибки (т.е. оператору программы, при выполнении которого нарушается проверяемое требование).

Необходимость фильтрации трасс ошибок возникает при нахождении нескольких трасс методом Multiple Error Analysis (MEA), которые нарушают одно и то же правило и начинаются с одной и той же точки входа. Целью фильтрации является удаление из рассмотрения эквивалентных трасс ошибок, т. е. соответствующих одной и той же ошибке в коде программы.
Данная фильтрация позволяет как сократить ресурсы, необходимые на обработку трасс ошибок, так и минимизировать число действий пользователя по их анализу.

Для формализации эквивалентности трасс ошибок используются:
1) Функция преобразования conversion(t), которая удаляет из трассы несущественные элементы.
2) Функция сравнения comparison(t1, t2), которая определяет операцию сравнения трасс.
3) Ручное редактирование внутреннего представления трассы manual(t), которое выполняет человек (например, удаление несущественных элементов трассы).
Таким образом, трасса t2 считается эквивалентной анализируемой пользователем трассе t1, если выполнено:
comparison(manual(conversion(t1)), conversion(t2)) ≡ true
Стоит отметить, что трассы считаются эквивалентными относительно заданных функций. Если функции заданы некорректно, то реальная эквивалентность или её отсутствие не гарантируется.

1. Автоматическая фильтрация трасс ошибок.

Пользователь задаёт функции преобразования и сравнения в конфигурации в виде:
  "MEA": {
    "<название правила 1>": {
      "additional model functions": "<путь к файлу с дополнительными модельными функциями (относительно директории verifier_files/mea)>",
      "conversion function": <название функции преобразования>,
      "comparison function": <название функции сравнения>
    },
    "<название правила N>": {
      "additional model functions": "<путь к файлу с дополнительными модельными функциями (относительно директории verifier_files/mea)>",
      "conversion function": <название функции преобразования>,
      "comparison function": <название функции сравнения>
    },
    "additional model functions": "<путь к файлу с дополнительными модельными функциями (относительно директории verifier_files/mea)>",
    "conversion function": <название функции преобразования>,
    "comparison function": <название функции сравнения>
  }

Далее при выполнении фильтрации трасс ошибок, нарушающих правило rule_i, будут выбраны соответствующие функции по следующей схеме:
 - если правило rule_i задано в конфигурации, то выбираются функции (conversion и comparison) для данного правила;
 - если правило не задано или для него не задана определённая функция, то будет взята функция верхнего уровня;
 - если функция не задана на верхнем уровне, то будет взята функция по умолчанию.

Поддерживаемые функции преобразования (conversion function):
1) Дерево вызовов модельных функций (значение "model_functions"). Модельные функции берутся из исходников (либо помечены комментарием /* MODEL_FUNC <имя функции> */, либо в них достигается метка ошибки) или из заданного файла в конфигурации "additional model functions". Функция используется по умолчанию.
2) Дерево вызовов всех функций (значение "call_tree"). Оставляет в трассе все элементы вызова функций и возврата из них. Имеет смысл использовать, если сравниваемые трассы различаются только вызовами немодельных функций. Данная функция является более точной, чем функция (1).
3) Список условий (значение "conditions"). Оставляет в трассе значения условий перехода (т. е. для каждого условия перехода, встреченного в трассе, сохраняется его значение).
4) Без преобразования (значение "full") - возвращает исходную трассу. Данная функция является самой точной и позволяет фильтровать только полностью совпадающие трассы (за исключением, может быть, не указанных в них элементов, например, точных значений некоторых переменных).

Поддерживаемые функции сравнения (comparison function):
1) Сравнение на полную эквивалентность (значение "eq"). Результат применения функции преобразования к трассам должен полностью совпадать. Используется по умолчанию.
2) Сравнение на включение одной трассы в другую (значение "in"). Одна трасса должна полностью содержаться в другой.
3) Отключение фильтрации  (значение "no"). Фильтрация производиться не будет, т. е. все полученные трассы будут предоставлены пользователю для анализа.

2. Ручная фильтрация трасс ошибок.

Для произведения ручной фильтрации пользователь в web-интерфейсе для каждой неразмеченной трассы создаёт оценку.
Под оценкой для трассы t понимается тройка (conversion, comparison, manual), а также некоторая вспомогательная информация (названия тегов, вердикт, комментарий и т.д.), которая не влияет на процесс сопоставления трасс. При этом трасса t также запоминается для данной оценки в качестве исходной трассы. Каждая оценка должна быть применима к трассе, для которой она изначально была создана. Все трассы, к которым будет успешно применена созданная оценка, будут считаться эквивалентными данной.
Цель ручной фильтрации — создать множество оценок, которые успешно применяются ко всем трассам. При этом число созданных оценок будет соответствовать числу ошибок в коде.

TODO: на данный момент поддержка в web-интерфейсе отсутствует.
